% ##R007##
% ##20##
% """
% Realice un predicado que permita validar una variable en PHP
% https://www.php.net/manual/en/language.variables.basics.php
% 20 pts

% php_var("$hola").
% true.
% hp_var("$_h").
% true.
% php_var("$h111").
% true.
% """



% =========================
% UTILIDADES BASE
% =========================

listatom_liststring([A],LC):-atom_string(A,C),LC=[C].
listatom_liststring([A|RA],LC):-
    listatom_liststring(RA,LCC),
    atom_string(A,C), LC=[C|LCC].

string_to_liststring(C,L):-string_chars(C,A),listatom_liststring(A,L).


% =========================
% LETRA
% =========================

letra("A"). letra("B"). letra("C"). letra("D"). letra("E").
letra("F"). letra("G"). letra("H"). letra("I"). letra("J").
letra("K"). letra("L"). letra("M"). letra("N"). letra("O").
letra("P"). letra("Q"). letra("R"). letra("S"). letra("T").
letra("U"). letra("V"). letra("W"). letra("X"). letra("Y").
letra("Z").

letra("a"). letra("b"). letra("c"). letra("d"). letra("e").
letra("f"). letra("g"). letra("h"). letra("i"). letra("j").
letra("k"). letra("l"). letra("m"). letra("n"). letra("o").
letra("p"). letra("q"). letra("r"). letra("s"). letra("t").
letra("u"). letra("v"). letra("w"). letra("x"). letra("y").
letra("z").


% =========================
% DIGITO
% =========================

digit("0"). digit("1"). digit("2"). digit("3"). digit("4").
digit("5"). digit("6"). digit("7"). digit("8"). digit("9").


% =========================
% CARÁCTER VÁLIDO DESPUÉS DEL PRIMERO
% =========================

val_php(A):- letra(A).
val_php(A):- digit(A).
val_php("_").


% =========================
% VALIDACIÓN PRINCIPAL
% =========================

php_var(Str):-
    string_to_liststring(Str,Lista),
    php_list(Lista).

php_list(["$",Primero|Resto]):-
    (letra(Primero); Primero="_"),
    resto_php(Resto).

resto_php([]).
resto_php([A|R]):-
    val_php(A),
    resto_php(R).